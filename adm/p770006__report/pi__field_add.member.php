<?php

/*
===========================================================

	프로젝트 이름 : 피리 웹프로그램

	만든사람 : 피리 PIREE

	홈페이지 : http://www.piree.co.kr

	작성날짜 : 2014년 03월 10일 월요일 오전 0시 02분, 날씨 꽃샘추위다... 찬 거센 바람이 계속 분다.

	저 작 권 : Copyright ⓒ 2014-2015 투스포츠 (원병철) All right reserved
							그누보드 외에 추가된 소스는~
							만든사람의 허락없이 무단으로 사용할수 없습니다.
							사용하고자 할 경우 만든사람의 허락을 받아야 합니다.
							http://www.piree.co.kr 에 문의해 주세요.

===========================================================
 피리 > 관리자 > 피리 신고하기 PLUS G5 > 회원 필드 추가하기
===========================================================


신고 권한
mb_pi_report_auth


회원 신고 DO
mb_pi_report_do_t


회원 신고 GET
mb_pi_report_get_t


회원_지정_신고
mb_pi_report_member_t


무분별한 신고 DO ALL
mb_pi_report_rash_do_t


*/


	#########################################################
	# 시작 => 선_처리__메뉴_지정__관리자_확인
	#########################################################

	//=======================================================
	// 메뉴_번호__지정____신고하기
	$sub_menu = "770006";


	//=======================================================
	// 기본처리_파일__첨부
	include_once('./_common.php');


	//=======================================================
	// 관리자_확인
	auth_check($auth[$sub_menu], 'r');

	#########################################################
	# 끝 => 선_처리
	#########################################################



	#########################################################
	# 시작 => 신고하기__설정_정보_파일__첨부
	#########################################################

	//=======================================================
	// 기본_설정_첨부__여부
	// 0 - 안해
	$is_get__piree_config = 0;


	//=======================================================
	// 신고하기__설정_정보__가져오기
	$is_get__report = 1;


	//=======================================================
	// 신고하기__설정_정보_파일__경로
	$piree_dir_path = PIREE_CONFIG_PATH ."/p__".$sub_menu."/pi__config.php";


	//=======================================================
	// 신고하기__설정_정보_파일__경로
	include_once($piree_dir_path);

	#########################################################
	# 끝 => 신고하기__설정_정보_파일__첨부
	#########################################################



	#########################################################
	# 시작 => 상수__변수__배열
	#########################################################

	//=======================================================
	// 다음으로_넘어가기
	// 0 - 안가
	// 1이상 - 가자
	$is_go_next = 0;


	//=======================================================
	// 이동할__페이지
	$go_url_s = "./index.php";

	#########################################################
	# 끝 => 상수__변수__배열
	#########################################################



	#########################################################
	# 시작 => 작업_처리__변수
	#########################################################

	//=======================================================
	// 필드_추가__작업_여부
	// 0 - 안가
	// 1이상 - 가자
	$is_add__fd = 0;


	//=======================================================
	// 필드__유무
	// 0 - 없음
	// 1 - 있음
	$field_check__report_auth				= 0;
	$field_check__blind_t						= 0;
	$field_check__report_do_t				= 0;
	$field_check__report_get_t			= 0;
	$field_check__report_member_t		= 0;
	$field_check__report_rash_do_t	= 0;

	#########################################################
	# 끝 => 작업_처리__변수
	#########################################################



	#########################################################
	# 시작 => 테이블_필드__추가하기
	#########################################################

	//=======================================================
	// 회원_테이블__유무__확인
	$sql = "SHOW TABLES LIKE '".$g5['member_table']."'";
	$table_s = sql_efv($sql);


	//=======================================================
	// 시작 => 회원_테이블__맞으면
	IF ($table_s == $g5['member_table'])
	{

		//=====================================================
		// ROW_1개__가져오기
		$sql = "SELECT * FROM ".$table_s." LIMIT 1";
		$row = sql_fetch($sql);


		#######################################################
		# 시작 => 신고_권한
		IF (!isset($row['mb_pi_report_auth']))
		{

			//===================================================
			// 필드_추가__쿼리문
			$sql = "ALTER TABLE `".$table_s."` ADD `mb_pi_report_auth` tinyint(4) UNSIGNED NOT NULL DEFAULT '1'";
			sql_query ($sql, false);

		}
		# 끝 => 신고_권한
		#######################################################



		#######################################################
		# 시작 => 블라인드__건수
		IF (!isset($row['mb_pi_blind_t']))
		{

			//===================================================
			// 필드_추가__쿼리문
			$sql = "ALTER TABLE `".$table_s."` ADD `mb_pi_blind_t` tinyint(4) UNSIGNED NOT NULL DEFAULT '0'";
			sql_query ($sql, false);

		}
		# 끝 => 블라인드__건수
		#######################################################



		#######################################################
		# 시작 => 회원_신고_DO____없으면
		IF (!isset($row['mb_pi_report_do_t']))
		{

			//===================================================
			// 필드_추가__쿼리문
			$sql = "ALTER TABLE `".$table_s."` ADD `mb_pi_report_do_t` smallint(6) UNSIGNED NOT NULL DEFAULT '0'";
			sql_query ($sql, false);

		}
		# 끝 => 회원_신고_DO____없으면
		#######################################################



		#######################################################
		# 시작 => 회원_신고_GET____없으면
		IF (!isset($row['mb_pi_report_get_t']))
		{

			//===================================================
			// 필드_추가__쿼리문
			$sql = "ALTER TABLE `".$table_s."` ADD `mb_pi_report_get_t` smallint(6) UNSIGNED NOT NULL DEFAULT '0'";
			sql_query ($sql, false);

		}
		# 끝 => 회원_신고_GET____없으면
		#######################################################



		#######################################################
		# 시작 => 회원_지정_신고____없으면
		IF (!isset($row['mb_pi_report_member_t']))
		{

			//===================================================
			// 필드_추가__쿼리문
			$sql = "ALTER TABLE `".$table_s."` ADD `mb_pi_report_member_t` tinyint(4) UNSIGNED NOT NULL DEFAULT '1'";
			sql_query ($sql, false);

		}
		# 끝 => 회원_지정_신고____없으면
		#######################################################



		#######################################################
		# 시작 => 무분별한_신고_DO_ALL____없으면
		IF (!isset($row['mb_pi_report_rash_do_t']))
		{

			//===================================================
			// 필드_추가__쿼리문
			$sql = "ALTER TABLE `".$table_s."` ADD `mb_pi_report_rash_do_t` smallint(6) UNSIGNED NOT NULL DEFAULT '0'";
			sql_query ($sql, false);

		}
		# 끝 => 무분별한_신고_DO_ALL____없으면
		#######################################################

	}
	// 끝 => 회원_테이블__맞으면
	//=======================================================

	#########################################################
	# 끝 => 테이블_필드__추가하기
	#########################################################



	#########################################################
	# 시작 => 마무리__페이지_이동
	#########################################################

	//=======================================================
	// 페이지_이동
	goto_url($go_url_s);
	EXIT;

	#########################################################
	# 끝 => 마무리__페이지_이동
	#########################################################


?>